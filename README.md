# Drones_Sim_Test

Для реализации использоовались Zenject, UniTask и DOTween (ради целой одной анимации возврата ресурса).
- [FSM](https://github.com/SotegPublic/Drones_Sim_Test/tree/main/Assets/Scripts/Infrastructure/GameStateMachine) - стейт машина, управляющая состояниями симуляции
- [Drones Controller](https://github.com/SotegPublic/Drones_Sim_Test/blob/main/Assets/Scripts/Drones/DronesController.cs) - контроллер управления дронами, управление реализовано через систему состояний дрона (упрощенная стейт машина).
- [Resources controller](https://github.com/SotegPublic/Drones_Sim_Test/blob/main/Assets/Scripts/ResourcesFolder/ResourcesController.cs) - система управления ресурсами (спавн, удаление). Спавн ресурсов происходит по гриду, который создается на этапе [инициализации](https://github.com/SotegPublic/Drones_Sim_Test/blob/main/Assets/Scripts/Infrastructure/GameStateMachine/States/GamePreparationState.cs) симуляции
- [Pool System](https://github.com/SotegPublic/Drones_Sim_Test/tree/main/Assets/Scripts/Infrastructure/Pool) - для спавна дронов и ресурсов используется система пулинга
- [Path Drawler](https://github.com/SotegPublic/Drones_Sim_Test/blob/main/Assets/Scripts/Drones/DrawDronePathController.cs) - для отрисовки пути используются Line Renderer на каждом агенте, которыми сверху управляет глобальный контроллер.
- [UI View](https://github.com/SotegPublic/Drones_Sim_Test/blob/main/Assets/Scripts/UI/Views/MainUIView.cs) и [UI Controller](https://github.com/SotegPublic/Drones_Sim_Test/blob/main/Assets/Scripts/UI/Controllers/MainUIController.cs) - Система UI.

  Задачу такого типа делал первый раз, поэтому реализация потребовала куда больше времени) Кроме того есть моменты, которые хотелось бы изменить, но на это поять же нужно время.
  - Спавн дронов, по хорошему, это должна быть очередь последовательных операций спавна с возможностью отмены очереди через канселейшен токен, в случае если игрок изменит количество дронов в меньшую сторону. Сейчас в любом случае все работает, но так было бы красивее.
  - Система избегания по приоритетам навмеша иногда отрабатывает не так как хотелось бы, можно еще больше увеличить радиус обхода агенту, но мне кажется лучше дополнить небольшой логикой избегания через глобальный контроллер (например сверять расстояние между дронами и если дрон с более высоким приоритетом оказывается слишком близко, останавливать движение и временно смещать дрона с низким приоритетом, допустим, перпендикулярно вектору движения дрона с более высоким приоритетом, но это нужно тестировать). До этого я использовал логику с разными приоритетами у дронов, но по итогу дроны с более высоким приоритетом бывало сносили стоящих дронов с более низким, по итогу сейчас у всех дронов одинаковый приоритет и они взаимно избегают друг друга.
  - Добавить дополнительную проверку в поиск ресурса, что бы если в процессе пути появился более близкий свободный ресурс, дрон переключился на него (на самом деле это не сложно, но совсем не успеваю по времени).
